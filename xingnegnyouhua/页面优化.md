### 1.游览器的回流和重绘

一、回流
当元素的尺寸、结构、位置等信息发生变化时，游览器需要重新渲染部分或全部文档，进行重新布局的过程叫做回流。 引起回流的操作有很多：

增删 DOM 元素
游览器窗口大小变化
初次渲染
元素字体变化
元素尺寸位置变化 ...

二、重绘
当页面中元素的样式属性发生改变但不影响元素的布局位置时，游览器对这个元素的样式重新绘制的过程叫做重绘。

触发重绘的方式也很多：

更改字体颜色
更改背景色
设置透明度 ...

#### 1.1 优化

回流和重绘对游览器的性能消耗都是比较大的，回流必将引起重绘,重绘不一定会引起回流。因为，我们需要尽量避免造成页面的回流。

使用 RequestAnimationFrame 函数实现动画

页面中可能会存在一些通过 js 实现的动画效果，我们应该避免使用 setTimeout()和 setInterval()来实现，因为这种回调可能会导致丢失帧而发生卡顿。
requestAnimationFrame 是浏览器用于定时循环操作的一个接口，类似于 setTimeout，主要用途是按帧对网页进行重绘。显示器有固定的刷新频率（60Hz 或 75Hz），也就是说，每秒最多只能重绘 60 次或 75 次，requestAnimationFrame 的基本思想就是与这个刷新频率保持同步，利用这个刷新频率进行页面重绘

#### 1.2css 优化

使用 will-change 属性：will-change 属性可以告诉浏览器元素将要发生的变化，从而提前进行优化。使用 will-change 属性可以让浏览器知道哪些属性可能会触发回流或重绘，从而提前进行优化。

```css
.element {
  will-change: transform;
}
```

CSS3 引入了一些属性，可以优化回流和重绘的性能。例如，使用 transform 代替 left 和 top 来改变元素的位置，或者使用 translate3d 开启硬件加速。示例代码如下:

```css
/* 不推荐的写法 */
element.style.left = '100px'
element.style.top = '200px'

/* 推荐的写法 */
element.style.transform = 'translate(100px, 200px)'

```
